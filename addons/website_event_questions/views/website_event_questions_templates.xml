<?xml version="1.0" encoding="utf-8"?>
<odoo>

<template id="registration_attendee_details_questions" inherit_id="website_event.registration_attendee_details" name="Registration Attendee Details with questions">
    <data>
        <!-- Attendee specific questions -->
        <xpath expr="//t[@name='attendee_loop']" position="inside">
            <t t-if="event.specific_question_ids">
                <script>
                    $(document).ready(function() {
                        _($("select.specific_answer,select.general_answer")).each(function(elem) {
                            $(elem).select2({ minimumResultsForSearch: -1 });
                        });
                    });
                </script>
                <div class="row mb8">
                    <div class="col-md-12 form-horizontal" t-foreach='event.specific_question_ids' t-as='question'>
                        <div class="form-group form-group-sm">
                            <span class="col-md-7 mt8 mb0 text-right"><t t-esc="question.title"/></span>
                            <div class="col-md-5">
                                <select t-attf-name="#{counter}-answer_ids-#{question.id}" class="form-control specific_answer" style="padding: 0px 0px; font-size: 14px;" required="true">
                                    <t t-foreach='question.answer_ids' t-as="answer">
                                        <option t-esc='answer.name' t-att-value='answer.id'/>
                                    </t>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </xpath>

        <!-- Generic questions -->
        <xpath expr="//div[@class='container']/t[last()]" position="after">
            <t t-if="event.general_question_ids">
                <h4 class="page-header mt8"><strong>Common Questions</strong></h4>
                <div class="row">
                    <div class="col-md-12 form-horizontal" t-foreach='event.general_question_ids' t-as='question'>
                        <div class="form-group form-group-sm">
                            <span class="col-md-7 mt8 mb0 text-right"><t t-esc='question.title'/></span>
                            <div class="col-md-5">
                                <select t-attf-name="0-answer_ids-#{question.id}" class="form-control general_answer" style="padding: 0px 0px; font-size: 14px;" required="true">
                                    <t t-foreach='question.answer_ids' t-as="answer">
                                        <option t-esc='answer.name' t-att-value='answer.id'/>
                                    </t>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </xpath>

        <xpath expr="//t[@name='attendee_loop']/div" position="attributes">
            <attribute name="class">row mb16</attribute>
        </xpath>
    </data>
</template>

</odoo>
