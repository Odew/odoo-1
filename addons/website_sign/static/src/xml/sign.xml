<?xml version="1.0" encoding="UTF-8"?>
<template>
    <t t-name="select.people">
        <input type="hidden" t-att-value="attachment.id" id="attach_id"/>
        <div class="col-md-12 oe_sign_title">
            <span>1. Who needs to sign ?</span>
        </div>
        <div class="table-responsive col-md-12">
            <table class="table table-hover oe_sel_followers">
                <t t-foreach='followers' t-as='follower'>
                    <tr>
                        <td>
                            <t t-if="follower.selected">
                                <input type="checkbox" t-att-checked="follower.selected" t-att-id="'input_mail_followers_'+follower.id" t-att-data-id="follower.id" t-att-name="follower.name"/>
                            </t>
                            <t t-if="!follower.selected">
                                <input type="checkbox" t-att-id="'input_mail_followers_'+follower.id" t-att-data-id="follower.id" t-att-name="follower.name"/>
                            </t>
                        </td>
                        <td>
                            <label t-att-for="'input_mail_followers_'+follower.id"><t t-raw="follower.name"/></label>
                        </td>
                        <td class="oe_email">
                            <label t-att-for="'input_mail_followers_'+follower.id"><t t-raw="follower.email"/></label>
                        </td>
                        <td>
                            <img class="oe_img" t-att-src="'/website/image?model=res.partner&amp;field=image_small&amp;id='+follower.id"></img>
                        </td>
                    </tr>
                </t>
            </table>
        </div>
        <div class="col-md-12 oe_sign_title">
            <span>2. Add document title and comments</span>
        </div>
        <div id="doc_title" class="col-md-12 oe_sign_comment">
            <input id="title" type="text" class="form-control" placeholder="Title" t-att-value="attachment.name"/>
        </div>
        <div class="col-md-12 oe_sign_comment">
            <textarea id="comments" rows="3" class="form-control" placeholder="Comments"><t t-raw="attachment.description ? attachment.description : ''"/></textarea>
        </div>
    </t>
    <t t-extend="mail.thread.message.attachments">
        <t t-jquery="div:first-child" t-operation="append">
            <a t-if="attachment.nb_toSign" class="sign_link" t-att-href="'/sign/document/'+attachment.id" target="_blank">
                Signed (<t t-raw="attachment.nb_signed+'/'+attachment.nb_toSign"/>)
            </a>
        </t>
        <t t-jquery="div:first-child .oe_delete" t-operation="after">
            <img t-if="!attachment.nb_toSign" t-att-id="attachment.id" class="request_sign oe_sign" title="Request Signature" src="/website_sign/static/src/img/sign.png"/>
            <img t-if="attachment.nb_toSign" t-att-id="attachment.id" class="request_sign oe_sign" title="Request Signature" src="/website_sign/static/src/img/check.png"/>
        </t>
    </t>
    <t t-extend="FieldBinaryFileUploader.files">
        <t t-jquery=".oe_attachment .oe_delete" t-operation="after">
            <img t-att-id="file.id" class="request_sign oe_sign" title="Request Signature" src="/website_sign/static/src/img/sign.png"/>
        </t>
    </t>
</template>
