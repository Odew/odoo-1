<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="ProjectTimesheet">
        <div class="container-fluid pt_application">
            <div class="row screens"></div>
        </div>
    </t>
    <t t-name="pt_drawer_menu">
        <div class="pt_drawer_menu_wrapper">
            <!--Zoen used to create the shady area to the rigth-->
            <div class="pt_drawer_menu_zone">
                <div class="pt_drawer_menu container">
                <!--Picture-->
                    <div class="row pt_drawer_picture">
                        <img src="static/src/img/kitten.jpg" alt="profile pic"></img>
                    </div>
                    <div class="progress" style="width: 100%"></div>
                <!--Menu Items-->
                    <div class="row pt_menu_item pt_activities_link">
                        <div class="col-xs-1"><span class="fa fa-tasks"></span></div>
                        <div class="col-xs-8"><a href="#">Activities</a><br/></div>
                    </div>
                    <div class="row pt_menu_item pt_day_planner_link">
                        <div class="col-xs-1"><span class="fa fa-calendar-o"></span></div>
                        <div class="col-xs-8"><a href="#">Day Plan</a><br/></div>
                    </div>
                    <div class="row pt_menu_item pt_settings_link">
                        <div class="col-xs-1"><span class="fa fa-cog"></span></div>
                        <div class="col-xs-8"><a href="#">Settings</a><br/></div>
                    </div>
                    <div class="row pt_menu_item pt_sync_link">
                        <div class="col-xs-1"><span class="fa fa-cloud-download"></span></div>
                        <div class="col-xs-8"><a href="#">Synchronization</a><br/></div>
                    </div>
                    <div class="progress" style="width: 100%"></div>
                </div>
            </div>
        </div>
    </t>
    <t t-name="activities_screen">
    	<t t-call="header">
    	</t>
    	<div class="pt_activities_screen">
    		<div class="row pt_timer">
    			<!--"main" section-->
	    		<div class="col-xs-6">
                    <div class="pt_timer_clock">
                        
                    </div>
                    
		    	</div>
		    	<div class="col-xs-2">
		    		<!--Start button / stop button-->
                    <t t-if="(!widget.current_activity) &amp;&amp; (!widget.timer_on)">
                        <a href="javascript:void(0)" class="btn btn-link pt_btn_start_activity pt_btn"><span class="fa fa-play" aria-hidden="true"></span> Start</a>
                    </t>
                    <t t-if="widget.timer_on">
                        <a href="javascript:void(0)" class="btn btn-link pt_btn_stop_activity pt_btn"><span class="fa fa-stop" aria-hidden="true"></span> Stop </a>
                    </t>
                    <t t-if="widget.current_activity &amp;&amp; !widget.timer_on">
                        <a href="javascript:void(0)" class="btn btn-link pt_btn_interrupt_activity pt_btn"><span class="fa fa-stop" aria-hidden="true"></span> Stop </a>  
                    </t>
				</div>
			</div>
            <div class="row pt_current_activity">
                <div class="col-xs-12">
                    <!--Current activity-->
                    <t t-if="widget.current_activity">
                        <div class="pt_activity" t-att-data-activity_id="widget.current_activity.id">
                            <span class="pt_project"><t t-esc="widget.get_project_name(widget.current_activity.project_id)"/></span><br/>
                            <t t-if="widget.current_activity.task_id">
                                <t t-esc="widget.get_task_name(widget.current_activity.task_id)"/><br/>
                            </t>
                        </div>
                    </t>
                </div>
            </div>
            <div class="pt_day_plan">
                <t t-if="widget.data.day_plan.length > 0">
                    <table class="table bordered pt_table_day_plan">
                        <tr>
                            <span class="pt_bold">Today's Tasks</span>
                        </tr>
                        <t t-foreach="widget.data.day_plan" t-as="day_plan_task_id">
                            <tr class="pt_day_plan_task" t-att-data-task_id="day_plan_task_id">
                                <td class="col-xs-10">
                                    <span class="pt_project"><t t-esc="widget.get_project_name_from_task_id(day_plan_task_id)"/></span><br/>
                                    <t t-esc="widget.get_task_name(day_plan_task_id)"/>
                                </td>
                                <td class="col-xs-2">
                                    <span class="fa fa-play" aria-hidden="true"></span>
                                </td>
                           </tr> 
                        </t>
                    </table>
                </t>
            </div>
            <div class="pt_activities_list">
    			<!--Rows etc.-->
                <table class="table table-condensed bordered">
                    <!--Activities-->
                    <t t-if="widget.account_analytic_lines.length > 0">
                        <span class="pt_bold">My activities</span>
        				<t t-foreach="widget.account_analytic_lines" t-as="account_analytic_line">
                            <t t-if="!(widget.current_activity &amp;&amp; account_analytic_line.id == widget.current_activity.id)">
                                <tr>
                                    <td class="col-xs-8 pt_activity" t-att-data-activity_id="account_analytic_line.id">
                                        <span class="pt_project"><t t-esc="widget.get_project_name(account_analytic_line.project_id)"/></span>
                                        <br/>
                                        <t t-if="account_analytic_line.task_id">
                                            <t t-esc="widget.get_task_name(account_analytic_line.task_id)"/>
                                        </t>
                                    </td>
                                    <td class="col-xs-1 pt_plus_or_minus">
                                        <div class="row pt_quick_subtract_time" t-att-data-activity_id="account_analytic_line.id">
                                            <a class="fa fa-minus" aria-hidden="true" href="#"></a>
                                        </div>
                                    </td>
                                    <td class="col-xs-2 pt_duration" t-att-data-activity_id="account_analytic_line.id">
                                        <div class="pt_duration_time">
                                            <t t-if="account_analytic_line.unit_amount">
                                                <t t-esc="widget.unit_amount_to_hours_minutes(account_analytic_line.unit_amount)"/>
                                            </t>
                                            <t t-if="!account_analytic_line.unit_amount">
                                                00:00
                                            </t>
                                        </div>
                                        <div class="pt_continue_activity_btn hidden">
                                            <span class="fa fa-play" aria-hidden="true"></span>
                                        </div>
                                    </td>
                                    <td class="col-xs-1 pt_plus_or_minus">
                                        <div class="row pt_quick_add_time" t-att-data-activity_id="account_analytic_line.id">
                                            <a class="fa fa-plus" aria-hidden="true" href="#"></a>
                                        </div>
                                    </td>
                                </tr>
                            </t>
        				</t>
                    </t>    
                </table>
            </div>
            <br/>
    	</div>
    </t>

    <t t-name="day_planner_screen">
    	<t t-call="header"></t>
    	<div class="pt_day_planner_screen">
    		<div class="well">
    			What will you be working on today?
    		</div>
    		<!-- <div class="container-fluid"> -->
                <t t-if="widget.tasks.length > 0">
                    <table class="table pt_day_plan_table">
        	    		<t t-foreach="widget.tasks" t-as="task">
            				<tr t-att-class="(widget.data.day_plan.indexOf(task.id) > -1) ? 'pt_day_plan_remove' : 'pt_day_plan_select'" t-att-data-task_id="task.id">
    	    					<td class="col-xs-3 pt_day_plan_selected">
                                    <t t-if="widget.data.day_plan.indexOf(task.id) > -1">
    	    						    <span class="fa fa-check"></span>
                                    </t>
    	    					</td>
    	    					<td class="col-xs-9">
    	    						<span class="pt_project"> <t t-esc="widget.get_project_name(task.project_id)"/></span>
                                    <br/>
    	    						<t t-esc="task.name"/>
    	    					</td>
            				</tr>
                        </t>
                    </table>
	    		</t>
    		<!-- </div> -->
    	</div>
    </t>

	<t t-name="settings_screen">
    	<t t-call="header">
    	</t>
    	<div class="pt_settings_screen container-fluid">
    		<div class="panel">
    			<div class="panel-heading">
	    			<p>Default project</p>
	    		</div>
	    		<div class="panel-body">
	    			<div class="col-xs-12">
                        <input type="hidden" name="pt_default_project" class="form-control pt_default_project_select2"/>
			    	</div>
		    	</div>
	    	</div>
	    	<div class="col-xs-12">
	    		<div class="row">
    				<p><small>The default project when starting a new timer or adding a new task.</small></p>
    				<div class="progress" style="width: 100%"></div>
    			</div>
    			<div class="row">
    				<p>Minimal duration</p>
    				<div class="input-group">
    					<input type="text" class="pt_minimal_duration" aria-describedby="minutes" t-att-placeholder="widget.data.settings.minimal_duration * 60"></input>
    					<span class="input-group-addon" id="minutes">minutes</span>
					</div>
                    <p class="pt_minimal_duration_tip" style="display:none;">Please enter a valid duration</p>
    				<p><small>When synchronizing, all durations below the minimal duration will be changed to this value.</small></p>
    				<div class="progress" style="width: 100%"></div>
    			</div>
    			<div class="row">
    				<p>Time unit</p>
    				<div class="input-group">
    					<input type="text" class="pt_time_unit" aria-describedby="minutes" t-att-placeholder="widget.data.settings.time_unit * 60"></input>
    					<span class="input-group-addon" id="minutes">minutes</span>
					</div>
                    <p class="pt_time_unit_tip" style="display:none;">Please enter a valid duration</p>
    				<p><small>When synchronizing, all durations will be rounded up to the higher multiple of this value.</small></p>
    				<div class="progress" style="width: 100%"></div>
    			</div>
	    	</div>
    	</div>
    </t>

    <t t-name="edit_activity_screen">
        <t t-call="header">
        </t>
        <div class="container-fluid"> 
                <p>Project</p>
                <!--select2 project selection-->
                <div class="row">
                    <div class="col-xs-12">
                        <input type="hidden" name="pt_activity_project" class="form-control pt_activity_project"/>
                    </div>
                </div>
            <div>
                <p><br/>Task</p>
                <div>
                    <input type="hidden" name="pt_activity_task" class="form-control pt_activity_task"/>
                </div>
                    <t t-if="!widget.activity">
                        <p><small>Please select a project first</small></p>
                    </t>
                    <br/>
            </div>
            <div>
                <p>Time spent (hh:mm)</p>
                <t t-if="widget.activity.unit_amount">
                    <input type="text" class="pt_activity_duration" aria-describedby="Time Spent" t-att-value="widget.unit_amount_to_hours_minutes(widget.activity.unit_amount)"></input>
                </t>
                <t t-if="!widget.activity.unit_amount">
                    <input type="text" class="pt_activity_duration" aria-describedby="Time Spent" placeholder="00:00"></input>
                </t>
                <!--Empty p for notification in case of wrong input -->
                <p></p>
            </div>
            <div>
                <p>Work Summary</p>
                <t t-if="widget.activity.desc">
                    <textarea class="pt_description"><t t-esc="widget.activity.desc"/></textarea>
                </t>
                <t t-if="!widget.activity.desc">
                    <textarea class="pt_description"></textarea>
                </t>
            </div>
            <div class="row">
                <div class="col-xs-4">
                    <a href="javascript:void(0)" class="btn btn-link pt_btn pt_validate_edit_btn">Save</a>
                </div>
                <div class="col-xs-4">
                    <a href="javascript:void(0)" class="btn btn-link pt_btn pt_discard_changes">Discard</a>
                </div>
                <!--You sould not be able to delete an activity that has a timer in progress-->
                <t t-if="!(widget.getParent().activities_screen.current_activity &amp;&amp; widget.activity.id == widget.getParent().activities_screen.current_activity.id)">
                    <div class="col-xs-offset-2 col-xs-2">
                        <a class="fa fa-trash pt_trash" data-toggle="modal" data-target=".pt_deletion_modal" href="#"></a>
                    </div>
                </t>
            </div>
            
            <!-- Modal to confirm deletion of an activity -->
            <div class="modal pt_deletion_modal" role="dialog">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-body">
                            Are you sure that you want to delete this activity?
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary pt_delete_activity" data-dismiss="modal">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="pt_save_msg well" style="display:none">Please select a project</div>
            </div>    
        </div>
    </t>
    <t t-name="sync_screen">
        <t t-call="header"></t>
        <div class="pt_sync_screen">
            <!--User is logged case-->
            <t t-if="widget.session.uid !== null">
                Welcome, <t t-esc="widget.session.username"/>
            </t>
            <!-- User is not logged--> 
            <t t-if="widget.session.uid === null">
                Please log in !
            </t>
            <span class="pt_bold">Synchronize your activities online</span>
            <br/><a href="javascript:void(0)" class="btn btn-link pt_test_btn pt_btn">Test Sync</a>
        </div>
    </t>
    <t t-name="header">
    	<nav class="navbar navbar-default navbar-fixed-top pt_navbar">
            <div class="container">
                <div class="row">
                    <div class="col-xs-2 pt_navbar_element">
                        <t t-if="widget.screen_name != 'Edit Activity'">
                            <a href="#" class="pt_burger_menu_open"><span class="fa fa-bars"></span></a>
                        </t>
                        <t t-if="widget.screen_name == 'Edit Activity'">
                            <a href="javascript:void(0)"><span class="fa fa-arrow-left pt_discard_changes" aria-hidden="true"></span></a>
                        </t>    
                    </div>
                    <div class="col-xs-8 pt_navbar_element"><a href="javascript:void(0)"><t t-esc="widget.screen_name"/></a></div>
                    <div class="col-xs-2 pt_navbar_element">
                        <t t-if="widget.screen_name == 'Activities'">
                            <a href="javascript:void(0)"><span class="fa fa-plus pt_button_plus_activity" aria-hidden="true"></span></a>
                        </t>
                        <t t-if="widget.screen_name != 'Activities' and widget.screen_name != 'Edit Activity'">
                            <a href="javascript:void(0)" class="pt_validate_btn"><span class="fa fa-check" aria-hidden="true"></span></a>
                        </t>
                    </div>
                </div>
            </div>
        </nav>
        <t t-call="pt_drawer_menu"></t> 		
    </t>
</templates>